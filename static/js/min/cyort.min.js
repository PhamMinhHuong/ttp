function fillReportDownloads(a){var b="",c="true"===a.hidden?"not-visible":"",d="true"===a.hidden?'checked="checked"':"";return b+='<div class="download '+c+'">',b+='  <div class="download-title">'+a.title+"</div>","pdf"===a.type?b+='  <div class="download-option1"><input type="checkbox" data-type="pdf" class="download-pdf '+c+'" name="id" value="'+a.id+'" '+d+"/></div>":"xlsx"===a.type&&(b+='  <div class="download-option2"><input type="checkbox" data-type="xls" class="download-xlsx '+c+'" name="id" value="'+a.id+'" '+d+"/></div>"),b+="</div>"}function gaTrack(a){a.each(function(a){var b=$(this).data("type"),c=$(this).parent().prev().text(),d=window._gaq||[];d.push(["_trackEvent",b,escape(c.toLowerCase())])})}var cyortURL="";$(function(){$(document).on("click",".cyort-trigger",function(a){var b=$(this),c=b.data("json-url"),d=$(".cyort-overlay"),e=d.find(".download-wrapper");e.html("");var f=$.getJSON(c,function(a){cyortURL=a.url,e.append('<div class="icon-row download-link"><div class="first icon-pdf"></div><div class="second icon-xls"></div></div>'),$.each(a.items,function(a,b){if("download"===b.itemtype){var c=fillReportDownloads(b);e.append(c)}else if("chapter"===b.itemtype){var d="";d+='<div class="chapter">',d+='  <h2 class="download-chapter-title">'+b.title+"</h2>",d+='  <div class="chapter-option1"><input type="checkbox" class="chaptercheckbox-pdf" name="chapter-pdf" value="1" /></div>',d+='  <div class="chapter-option2"><input type="checkbox" class="chaptercheckbox-xlsx" name="chapter-xlsx" value="1" /></div>',$.each(b.items,function(a,b){d+=fillReportDownloads(b)}),d+="</div>",e.append(d)}else"introduction"===b.itemtype&&($(".download-header").html(""),$(".download-header").append('<img src="'+b.image+'" alt="'+b.title+'" />'),$(".download-header").append("<h1>"+b.title+"</h1>"),$(".download-header").append("<p>"+b.description+"</p>"))}),d.addClass("visible")});f.fail(function(){window.alert("Helaas, er ging iets fout bij het ophalen van de gegevens.")}),a.preventDefault()}),$(document).on("click",".cyort-closebutton",function(a){$(".cyort-overlay").removeClass("visible"),a.preventDefault()}),$(document).on("click",".download-button-pdf",function(a){a.preventDefault();var b=$("input.download-pdf:not(.not-visible):checked");b.length>0?(b=$("input.download-pdf:checked"),gaTrack(b),window.open(cyortURL+"&type=pdf&"+b.serialize()),$(".text-button").blur()):window.alert("You have not selected any pages or chapters.")}),$(document).on("click",".download-button-zip",function(a){a.preventDefault();var b=$("input.download-pdf:not(.not-visible):checked, input.download-xlsx:not(.not-visible):checked");b.length>0?(gaTrack(b),window.open(cyortURL+"&type=zip&"+b.serialize()),$(".text-button").blur()):window.alert("You have not selected any pages or chapters.")}),$(document).on("click",".download-chapter-title",function(a){a.preventDefault(),$(this).parents(".chapter").toggleClass("closed")}),$(document).on("change",".chaptercheckbox-pdf",function(){var a=$(this);a.parents(".chapter").find("input.download-pdf").prop("checked",a.prop("checked"))}),$(document).on("change",".chaptercheckbox-xlsx",function(){var a=$(this);a.parents(".chapter").find("input.download-xlsx").prop("checked",a.prop("checked"))})});